SEZIONE 5: GRID ZERO - SPECIFICA COMPLETA
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
5.1 PARAMETRI INPUT
cpp//+------------------------------------------------------------------+
//| GRID ZERO SETTINGS                                                |
//+------------------------------------------------------------------+
input group "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
input group "â•‘  ðŸŽ¯ GRID ZERO - RIEMPIMENTO BUCO CENTRALE                  â•‘"
input group "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"

input bool   Enable_GridZero = true;              // âœ… Abilita Grid Zero
input int    GridZero_Trigger_Level = 2;          // ðŸŽ¯ Trigger: Inserire dopo L(X) fillata

// NOTA: Il lot di Grid Zero Ã¨ UGUALE al lot delle altre grid (BaseLot)
// Non serve parametro separato per il lot
5.2 POSIZIONE ESATTA GRID ZERO
VISUALIZZAZIONE STRUTTURA COMPLETA
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                        STRUTTURA GRID COMPLETA CON GRID ZERO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

                        GRID A                    GRID B
                        (SOLO BUY)                (SOLO SELL)
PREZZO
  â†‘
  â”‚
  â”‚    L7 UPPER         BUY STOP @+84            SELL LIMIT @+87
  â”‚    L6 UPPER         BUY STOP @+72            SELL LIMIT @+75
  â”‚    L5 UPPER         BUY STOP @+60            SELL LIMIT @+63
  â”‚    L4 UPPER         BUY STOP @+48            SELL LIMIT @+51
  â”‚    L3 UPPER         BUY STOP @+36            SELL LIMIT @+39
  â”‚    L2 UPPER         BUY STOP @+24            SELL LIMIT @+27    â† TRIGGER!
  â”‚    L1 UPPER         BUY STOP @+12            SELL LIMIT @+15
  â”‚                     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  â”‚
  â”‚                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                     â”‚         "BUCO" CENTRALE                 â”‚
  â”‚                     â”‚         24 pips senza ordini            â”‚
  â”‚                     â”‚                                         â”‚
  â”‚    â˜… GRID ZERO â˜…    â”‚  Inserita QUI quando L2 Ã¨ fillata!     â”‚
  â”‚    (dinamica)       â”‚                                         â”‚
  â”‚                     â”‚  SE BIAS RIALZISTA (prezzo sopra):      â”‚
  â”‚                     â”‚  â”œâ”€â”€ SELL STOP @ 0 (Entry)              â”‚
  â”‚                     â”‚  â””â”€â”€ BUY LIMIT @ -3 (hedge)             â”‚
  â”‚                     â”‚                                         â”‚
  â”‚                     â”‚  SE BIAS RIBASSISTA (prezzo sotto):     â”‚
  â”‚                     â”‚  â”œâ”€â”€ BUY STOP @ 0 (Entry)               â”‚
  â”‚                     â”‚  â””â”€â”€ SELL LIMIT @ +3 (hedge)            â”‚
  â”‚                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ENTRY POINT (0) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  â”‚
  â”‚                     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  â”‚    L1 LOWER         BUY LIMIT @-15           SELL STOP @-12
  â”‚    L2 LOWER         BUY LIMIT @-27           SELL STOP @-24    â† TRIGGER!
  â”‚    L3 LOWER         BUY LIMIT @-39           SELL STOP @-36
  â”‚    L4 LOWER         BUY LIMIT @-51           SELL STOP @-48
  â”‚    L5 LOWER         BUY LIMIT @-63           SELL STOP @-60
  â”‚    L6 LOWER         BUY LIMIT @-75           SELL STOP @-72
  â”‚    L7 LOWER         BUY LIMIT @-87           SELL STOP @-84
  â”‚
  â†“
5.3 LOGICA DI INSERIMENTO GRID ZERO
REGOLA FONDAMENTALE
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  GRID ZERO: Inserisce la struttura OPPOSTA al movimento!                   â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                            â•‘
â•‘  BIAS RIALZISTA (L2 BUY fillata, prezzo sopra Entry):                      â•‘
â•‘  â””â”€â”€ Inserire Grid Zero RIBASSISTA @ Entry                                 â•‘
â•‘                                                                            â•‘
â•‘  BIAS RIBASSISTA (L2 SELL fillata, prezzo sotto Entry):                    â•‘
â•‘  â””â”€â”€ Inserire Grid Zero RIALZISTA @ Entry                                  â•‘
â•‘                                                                            â•‘
â•‘  PERCHÃ‰: Cattura il RITORNO al centro quando il mercato mean-reverte!      â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
TRIGGER DI INSERIMENTO
QUANDO INSERIRE GRID ZERO:

Condizione 1: Enable_GridZero = true
Condizione 2: Grid L2 Ã¨ stata FILLATA
Condizione 3: Grid Zero NON Ã¨ giÃ  stata inserita

CHECK nel codice:
â”œâ”€â”€ IsGridLevelFilled(GRID_A, ZONE_UPPER, 1) â†’ L2 BUY fillata
â””â”€â”€ IsGridLevelFilled(GRID_B, ZONE_LOWER, 1) â†’ L2 SELL fillata

NOTA: L2 = index 1 perchÃ© array 0-based (L1=0, L2=1, L3=2...)
CASO 1: BIAS RIALZISTA
SITUAZIONE:
â”œâ”€â”€ Prezzo Ã¨ salito
â”œâ”€â”€ L1 BUY STOP @ +12 FILLATA
â”œâ”€â”€ L2 BUY STOP @ +24 FILLATA â† TRIGGER!
â”œâ”€â”€ Prezzo attuale: ~+25 pips o piÃ¹

AZIONE: Inserire Grid Zero RIBASSISTA

ORDINI DA PIAZZARE:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                         â”‚
â”‚  1. SELL STOP @ Entry (0 pips)                                          â”‚
â”‚     â”œâ”€â”€ Tipo: ORDER_TYPE_SELL_STOP                                      â”‚
â”‚     â”œâ”€â”€ Entry: entryPoint (1.35000)                                     â”‚
â”‚     â”œâ”€â”€ TP: entryPoint - spacing = -12 pips (1.34880)                   â”‚
â”‚     â”œâ”€â”€ Lot: BaseLot (UGUALE alle altre grid)                           â”‚
â”‚     â”œâ”€â”€ Magic: GetGridMagic(GRID_B)                                     â”‚
â”‚     â””â”€â”€ Comment: "GridB-L0-SELL_STOP"                                   â”‚
â”‚                                                                         â”‚
â”‚  2. BUY LIMIT @ Entry - hedge offset (-3 pips)                          â”‚
â”‚     â”œâ”€â”€ Tipo: ORDER_TYPE_BUY_LIMIT                                      â”‚
â”‚     â”œâ”€â”€ Entry: entryPoint - hedgeOffset = -3 pips (1.34970)             â”‚
â”‚     â”œâ”€â”€ TP: entryPoint + spacing = +12 pips (1.35120)                   â”‚
â”‚     â”œâ”€â”€ Lot: BaseLot (UGUALE alle altre grid)                           â”‚
â”‚     â”œâ”€â”€ Magic: GetGridMagic(GRID_A)                                     â”‚
â”‚     â””â”€â”€ Comment: "GridA-L0-BUY_LIMIT"                                   â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

PERCHÃ‰ FUNZIONA:
â”œâ”€â”€ SELL STOP @ 0: Ãˆ SOTTO il prezzo attuale (+25) â†’ PENDING âœ…
â”œâ”€â”€ BUY LIMIT @ -3: Ãˆ SOTTO il prezzo attuale (+25) â†’ PENDING âœ…
â””â”€â”€ Nessun fill immediato!
CASO 2: BIAS RIBASSISTA
SITUAZIONE:
â”œâ”€â”€ Prezzo Ã¨ sceso
â”œâ”€â”€ L1 SELL STOP @ -12 FILLATA
â”œâ”€â”€ L2 SELL STOP @ -24 FILLATA â† TRIGGER!
â”œâ”€â”€ Prezzo attuale: ~-25 pips o meno

AZIONE: Inserire Grid Zero RIALZISTA

ORDINI DA PIAZZARE:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                         â”‚
â”‚  1. BUY STOP @ Entry (0 pips)                                           â”‚
â”‚     â”œâ”€â”€ Tipo: ORDER_TYPE_BUY_STOP                                       â”‚
â”‚     â”œâ”€â”€ Entry: entryPoint (1.35000)                                     â”‚
â”‚     â”œâ”€â”€ TP: entryPoint + spacing = +12 pips (1.35120)                   â”‚
â”‚     â”œâ”€â”€ Lot: BaseLot (UGUALE alle altre grid)                           â”‚
â”‚     â”œâ”€â”€ Magic: GetGridMagic(GRID_A)                                     â”‚
â”‚     â””â”€â”€ Comment: "GridA-L0-BUY_STOP"                                    â”‚
â”‚                                                                         â”‚
â”‚  2. SELL LIMIT @ Entry + hedge offset (+3 pips)                         â”‚
â”‚     â”œâ”€â”€ Tipo: ORDER_TYPE_SELL_LIMIT                                     â”‚
â”‚     â”œâ”€â”€ Entry: entryPoint + hedgeOffset = +3 pips (1.35030)             â”‚
â”‚     â”œâ”€â”€ TP: entryPoint - spacing = -12 pips (1.34880)                   â”‚
â”‚     â”œâ”€â”€ Lot: BaseLot (UGUALE alle altre grid)                           â”‚
â”‚     â”œâ”€â”€ Magic: GetGridMagic(GRID_B)                                     â”‚
â”‚     â””â”€â”€ Comment: "GridB-L0-SELL_LIMIT"                                  â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

PERCHÃ‰ FUNZIONA:
â”œâ”€â”€ BUY STOP @ 0: Ãˆ SOPRA il prezzo attuale (-25) â†’ PENDING âœ…
â”œâ”€â”€ SELL LIMIT @ +3: Ãˆ SOPRA il prezzo attuale (-25) â†’ PENDING âœ…
â””â”€â”€ Nessun fill immediato!
5.4 TAKE PROFIT GRID ZERO
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  TAKE PROFIT - STESSA DISTANZA DELLE ALTRE GRID                            â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                            â•‘
â•‘  STOP L0:                                                                  â•‘
â•‘  â”œâ”€â”€ SELL STOP @ 0 â†’ TP @ -12 (= entry SELL STOP L1)                      â•‘
â•‘  â””â”€â”€ BUY STOP @ 0 â†’ TP @ +12 (= entry BUY STOP L1)                        â•‘
â•‘  Distanza TP: 12 pips (= spacing)                                         â•‘
â•‘                                                                            â•‘
â•‘  LIMIT L0:                                                                 â•‘
â•‘  â”œâ”€â”€ BUY LIMIT @ -3 â†’ TP @ +12 (15 pips distanza, come L1)                â•‘
â•‘  â””â”€â”€ SELL LIMIT @ +3 â†’ TP @ -12 (15 pips distanza, come L1)               â•‘
â•‘  Distanza TP: spacing + hedge = 15 pips (come altri LIMIT)                â•‘
â•‘                                                                            â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
5.5 CYCLING GRID ZERO
CYCLING: ATTIVO come tutte le altre grid!

Quando SELL STOP L0 chiude in TP:
â””â”€â”€ Cyclic Reopen piazza nuovo SELL STOP L0 @ Entry

Quando BUY LIMIT L0 chiude in TP:
â””â”€â”€ Cyclic Reopen piazza nuovo BUY LIMIT L0 @ -3 pips

Quando BUY STOP L0 chiude in TP:
â””â”€â”€ Cyclic Reopen piazza nuovo BUY STOP L0 @ Entry

Quando SELL LIMIT L0 chiude in TP:
â””â”€â”€ Cyclic Reopen piazza nuovo SELL LIMIT L0 @ +3 pips
5.6 IMPLEMENTAZIONE CODICE COMPLETA
cpp//+------------------------------------------------------------------+
//| GridZero.mqh - Grid Zero Implementation                           |
//+------------------------------------------------------------------+
#property copyright "Sugamara Ribelle (C) 2025"

//+------------------------------------------------------------------+
//| GRID ZERO VARIABLES                                               |
//+------------------------------------------------------------------+
bool g_gridZeroInserted = false;
bool g_gridZeroBiasUp = false;    // true = inserita ribassista
bool g_gridZeroBiasDown = false;  // true = inserita rialzista

ulong g_gridZero_StopTicket = 0;
ulong g_gridZero_LimitTicket = 0;

//+------------------------------------------------------------------+
//| Initialize Grid Zero                                              |
//+------------------------------------------------------------------+
void InitGridZero() {
    g_gridZeroInserted = false;
    g_gridZeroBiasUp = false;
    g_gridZeroBiasDown = false;
    g_gridZero_StopTicket = 0;
    g_gridZero_LimitTicket = 0;
    
    if(Enable_GridZero) {
        Print("[GridZero] Initialized - Trigger Level: L", GridZero_Trigger_Level);
    }
}

//+------------------------------------------------------------------+
//| Check and Insert Grid Zero - Chiamata dopo ogni fill              |
//+------------------------------------------------------------------+
void CheckAndInsertGridZero() {
    // Check se abilitato
    if(!Enable_GridZero) return;
    
    // Check se giÃ  inserita
    if(g_gridZeroInserted) return;
    
    double currentPrice = SymbolInfoDouble(_Symbol, SYMBOL_BID);
    double spacing = PipsToPoints(currentSpacing_Pips);
    double triggerDistance = spacing * GridZero_Trigger_Level;
    
    //=================================================================
    // CHECK BIAS RIALZISTA
    // Condizione: Prezzo sopra Entry + (spacing Ã— trigger_level)
    // Significa: L2 (o livello trigger) Ã¨ stata fillata
    //=================================================================
    if(currentPrice > entryPoint + triggerDistance) {
        
        // Verifica che il livello trigger sia effettivamente fillato
        int triggerIndex = GridZero_Trigger_Level - 1;  // L2 = index 1
        if(IsGridLevelFilled(GRID_A, ZONE_UPPER, triggerIndex)) {
            
            Print("[GridZero] Bias RIALZISTA detected - L", GridZero_Trigger_Level, " filled");
            InsertGridZeroRibassista();
            g_gridZeroInserted = true;
            g_gridZeroBiasUp = true;
        }
    }
    
    //=================================================================
    // CHECK BIAS RIBASSISTA
    // Condizione: Prezzo sotto Entry - (spacing Ã— trigger_level)
    // Significa: L2 (o livello trigger) Ã¨ stata fillata
    //=================================================================
    else if(currentPrice < entryPoint - triggerDistance) {
        
        // Verifica che il livello trigger sia effettivamente fillato
        int triggerIndex = GridZero_Trigger_Level - 1;  // L2 = index 1
        if(IsGridLevelFilled(GRID_B, ZONE_LOWER, triggerIndex)) {
            
            Print("[GridZero] Bias RIBASSISTA detected - L", GridZero_Trigger_Level, " filled");
            InsertGridZeroRialzista();
            g_gridZeroInserted = true;
            g_gridZeroBiasDown = true;
        }
    }
}

//+------------------------------------------------------------------+
//| Insert Grid Zero RIBASSISTA (quando bias Ã¨ rialzista)             |
//| Ordini: SELL STOP @ Entry + BUY LIMIT @ Entry-hedge               |
//+------------------------------------------------------------------+
void InsertGridZeroRibassista() {
    double spacing = PipsToPoints(currentSpacing_Pips);
    double hedgeOffset = PipsToPoints(Hedge_Spacing_Pips);
    double lot = BaseLot;  // STESSO LOT delle altre grid
    
    Print("[GridZero] Inserting RIBASSISTA structure...");
    
    //â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    // 1. SELL STOP @ Entry (0)
    //â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    double sellStopEntry = entryPoint;
    double sellStopTP = entryPoint - spacing;  // TP @ -12 pips
    
    g_gridZero_StopTicket = PlacePendingOrder(
        ORDER_TYPE_SELL_STOP,
        lot,
        sellStopEntry,
        0,  // No SL
        sellStopTP,
        "GridB-L0-SELL_STOP",
        GetGridMagic(GRID_B)
    );
    
    if(g_gridZero_StopTicket > 0) {
        PrintFormat("[GridZero] SELL STOP placed @ %.5f, TP @ %.5f, Lot: %.2f",
                    sellStopEntry, sellStopTP, lot);
    } else {
        Print("[GridZero] ERROR: Failed to place SELL STOP");
    }
    
    //â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    // 2. BUY LIMIT @ Entry - hedge (-3 pips)
    //â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    double buyLimitEntry = entryPoint - hedgeOffset;
    double buyLimitTP = entryPoint + spacing;  // TP @ +12 pips
    
    g_gridZero_LimitTicket = PlacePendingOrder(
        ORDER_TYPE_BUY_LIMIT,
        lot,
        buyLimitEntry,
        0,  // No SL
        buyLimitTP,
        "GridA-L0-BUY_LIMIT",
        GetGridMagic(GRID_A)
    );
    
    if(g_gridZero_LimitTicket > 0) {
        PrintFormat("[GridZero] BUY LIMIT placed @ %.5f, TP @ %.5f, Lot: %.2f",
                    buyLimitEntry, buyLimitTP, lot);
    } else {
        Print("[GridZero] ERROR: Failed to place BUY LIMIT");
    }
    
    Print("[GridZero] RIBASSISTA structure inserted successfully!");
}

//+------------------------------------------------------------------+
//| Insert Grid Zero RIALZISTA (quando bias Ã¨ ribassista)             |
//| Ordini: BUY STOP @ Entry + SELL LIMIT @ Entry+hedge               |
//+------------------------------------------------------------------+
void InsertGridZeroRialzista() {
    double spacing = PipsToPoints(currentSpacing_Pips);
    double hedgeOffset = PipsToPoints(Hedge_Spacing_Pips);
    double lot = BaseLot;  // STESSO LOT delle altre grid
    
    Print("[GridZero] Inserting RIALZISTA structure...");
    
    //â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    // 1. BUY STOP @ Entry (0)
    //â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    double buyStopEntry = entryPoint;
    double buyStopTP = entryPoint + spacing;  // TP @ +12 pips
    
    g_gridZero_StopTicket = PlacePendingOrder(
        ORDER_TYPE_BUY_STOP,
        lot,
        buyStopEntry,
        0,  // No SL
        buyStopTP,
        "GridA-L0-BUY_STOP",
        GetGridMagic(GRID_A)
    );
    
    if(g_gridZero_StopTicket > 0) {
        PrintFormat("[GridZero] BUY STOP placed @ %.5f, TP @ %.5f, Lot: %.2f",
                    buyStopEntry, buyStopTP, lot);
    } else {
        Print("[GridZero] ERROR: Failed to place BUY STOP");
    }
    
    //â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    // 2. SELL LIMIT @ Entry + hedge (+3 pips)
    //â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    double sellLimitEntry = entryPoint + hedgeOffset;
    double sellLimitTP = entryPoint - spacing;  // TP @ -12 pips
    
    g_gridZero_LimitTicket = PlacePendingOrder(
        ORDER_TYPE_SELL_LIMIT,
        lot,
        sellLimitEntry,
        0,  // No SL
        sellLimitTP,
        "GridB-L0-SELL_LIMIT",
        GetGridMagic(GRID_B)
    );
    
    if(g_gridZero_LimitTicket > 0) {
        PrintFormat("[GridZero] SELL LIMIT placed @ %.5f, TP @ %.5f, Lot: %.2f",
                    sellLimitEntry, sellLimitTP, lot);
    } else {
        Print("[GridZero] ERROR: Failed to place SELL LIMIT");
    }
    
    Print("[GridZero] RIALZISTA structure inserted successfully!");
}

//+------------------------------------------------------------------+
//| Get Grid Zero Status for Dashboard                                |
//+------------------------------------------------------------------+
string GetGridZeroStatus() {
    if(!Enable_GridZero) return "DISABLED";
    if(!g_gridZeroInserted) return "WAITING";
    if(g_gridZeroBiasUp) return "RIBASSISTA";
    if(g_gridZeroBiasDown) return "RIALZISTA";
    return "UNKNOWN";
}
5.7 CHECKLIST IMPLEMENTAZIONE GRID ZERO
â–¡ Parametro: Enable_GridZero (bool) aggiunto
â–¡ Parametro: GridZero_Trigger_Level (int, default=2) aggiunto
â–¡ Lot: Usa BaseLot (stesso delle altre grid)
â–¡ File: GridZero.mqh creato
â–¡ Include: Aggiunto in Sugamara.mq5
â–¡ Init: InitGridZero() chiamata in OnInit()
â–¡ Check: CheckAndInsertGridZero() chiamata dopo ogni fill
â–¡ Cycling: Grid Zero integrata nel cyclic reopen
â–¡ Dashboard: Grid Zero status mostrato
â–¡ Test: Bias rialzista â†’ inserisce ribassista
â–¡ Test: Bias ribassista â†’ inserisce rialzista
â–¡ Test: Cycling funziona per Grid Zero
